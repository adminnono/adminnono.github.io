<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pierre Gourmet | Critique Gastronomique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"
    />
    <style>
      body {
        font-family: "Montserrat", sans-serif;
        background-color: #f9f7f3;
        color: #333;
      }
      h1,
      h2,
      h3,
      h4,
      h5 {
        font-family: "Playfair Display", serif;
      }
      .restaurant-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .restaurant-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }
      .gold-star {
        color: #d4af37;
      }
      .admin-input {
        transition: border-color 0.3s ease;
      }
      .admin-input:focus {
        border-color: #d4af37;
        outline: none;
        box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
      }
      #map {
        height: 500px;
        width: 100%;
        border-radius: 0.5rem;
      }
      .view-toggle-btn.active {
        background-color: #d4af37;
        color: white;
      }
      .tab-button.active {
        border-bottom: 2px solid #d4af37;
        color: #d4af37;
      }
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #d4af37;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="bg-white shadow-md">
      <div
        class="container mx-auto px-4 py-6 flex justify-between items-center"
      >
        <div class="flex items-center">
          <div class="mr-4">
            <svg
              class="w-10 h-10"
              viewBox="0 0 50 50"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                cx="25"
                cy="25"
                r="24"
                stroke="#d4af37"
                stroke-width="2"
              />
              <path
                d="M15,15 Q25,5 35,15 T35,35 Q25,45 15,35 T15,15"
                stroke="#d4af37"
                stroke-width="2"
                fill="none"
              />
              <circle cx="25" cy="25" r="5" fill="#d4af37" />
            </svg>
          </div>
          <div>
            <h1 class="text-2xl md:text-3xl font-bold">Pierre Gourmet</h1>
            <p class="text-sm text-gray-500 italic">Critique gastronomique</p>
          </div>
        </div>
        <nav class="hidden md:flex space-x-6">
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition"
            onclick="showPage('home')"
            >Accueil</a
          >
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition"
            onclick="showPage('about')"
            >À propos</a
          >
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition"
            onclick="showPage('contact')"
            >Contact</a
          >
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition"
            id="adminButton"
            >Administration</a
          >
        </nav>
        <button class="md:hidden text-gray-800" id="mobileMenuButton">
          <i class="fas fa-bars text-2xl"></i>
        </button>
      </div>
      <!-- Mobile Menu -->
      <div id="mobileMenu" class="hidden md:hidden bg-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition py-2"
            onclick="showPage('home')"
            >Accueil</a
          >
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition py-2"
            onclick="showPage('about')"
            >À propos</a
          >
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition py-2"
            onclick="showPage('contact')"
            >Contact</a
          >
          <a
            href="#"
            class="text-gray-800 hover:text-[#d4af37] transition py-2"
            id="mobileAdminButton"
            >Administration</a
          >
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
      <!-- Home Page -->
      <div id="home" class="page">
        <!-- Hero Section -->
        <section class="mb-12">
          <div class="bg-[#2c3e50] rounded-lg overflow-hidden relative">
            <div class="absolute inset-0 bg-black opacity-40"></div>
            <div class="relative z-10 p-8 md:p-16 text-white">
              <h2 class="text-3xl md:text-5xl font-bold mb-4">
                Découvrez les meilleures tables de France
              </h2>
              <p class="text-lg md:text-xl mb-8 max-w-2xl">
                Explorez ma sélection personnelle des restaurants qui méritent
                votre attention, des bistrots authentiques aux établissements
                étoilés.
              </p>
              <div class="flex flex-wrap gap-4">
                <button
                  class="bg-[#d4af37] hover:bg-[#b8941f] text-white px-6 py-3 rounded-full font-medium transition"
                >
                  Découvrir les restaurants
                </button>
                <button
                  class="bg-transparent border-2 border-white hover:bg-white hover:text-[#2c3e50] text-white px-6 py-3 rounded-full font-medium transition"
                >
                  En savoir plus
                </button>
              </div>
            </div>
            <div
              class="h-64 md:h-96 bg-[url('https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')] bg-cover bg-center"
            ></div>
          </div>
        </section>

        <!-- Filters Section -->
        <section class="mb-8">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <div
              class="flex flex-col md:flex-row md:items-center justify-between mb-6"
            >
              <h3 class="text-2xl font-semibold mb-4 md:mb-0">
                Filtrer les restaurants
              </h3>
              <div class="flex space-x-2">
                <button
                  class="view-toggle-btn active px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300 transition"
                  data-view="list"
                >
                  <i class="fas fa-list mr-2"></i>Liste
                </button>
                <button
                  class="view-toggle-btn px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300 transition"
                  data-view="map"
                >
                  <i class="fas fa-map-marker-alt mr-2"></i>Carte
                </button>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1"
                  >Ville</label
                >
                <select
                  id="cityFilter"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                >
                  <option value="">Toutes les villes</option>
                  <!-- Options will be populated dynamically -->
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1"
                  >Type de cuisine</label
                >
                <select
                  id="cuisineFilter"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                >
                  <option value="">Tous les types</option>
                  <!-- Options will be populated dynamically -->
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1"
                  >Note minimale</label
                >
                <select
                  id="ratingFilter"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                >
                  <option value="0">Toutes les notes</option>
                  <option value="1">★ et plus</option>
                  <option value="2">★★ et plus</option>
                  <option value="3">★★★ et plus</option>
                  <option value="4">★★★★ et plus</option>
                  <option value="5">★★★★★</option>
                </select>
              </div>
            </div>
          </div>
        </section>

        <!-- Restaurants List View -->
        <section id="listView" class="mb-12">
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
            id="restaurantsList"
          >
            <!-- Restaurant cards will be populated here -->
          </div>
        </section>

        <!-- Restaurants Map View -->
        <section id="mapView" class="mb-12 hidden">
          <div id="map"></div>
        </section>
      </div>

      <!-- Restaurant Detail Page -->
      <div id="restaurantDetail" class="page hidden">
        <button
          class="mb-6 flex items-center text-gray-600 hover:text-[#d4af37] transition"
          onclick="showPage('home')"
        >
          <i class="fas fa-arrow-left mr-2"></i> Retour aux restaurants
        </button>
        <div id="restaurantDetailContent">
          <!-- Restaurant detail content will be populated here -->
        </div>
      </div>

      <!-- About Page -->
      <div id="about" class="page hidden">
        <div class="bg-white rounded-lg shadow-md p-8">
          <h2 class="text-3xl font-bold mb-6">À propos de Pierre Gourmet</h2>
          <div class="flex flex-col md:flex-row gap-8">
            <div class="md:w-1/3">
              <div class="rounded-lg overflow-hidden mb-4">
                <svg
                  class="w-full h-64 bg-gray-200"
                  viewBox="0 0 200 200"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <circle cx="100" cy="70" r="40" fill="#d4af37" />
                  <rect x="60" y="120" width="80" height="80" fill="#d4af37" />
                  <circle cx="80" cy="60" r="5" fill="white" />
                  <circle cx="120" cy="60" r="5" fill="white" />
                  <path
                    d="M80,90 Q100,110 120,90"
                    stroke="white"
                    stroke-width="3"
                    fill="none"
                  />
                </svg>
              </div>
              <div class="flex justify-center space-x-4">
                <a href="#" class="text-gray-600 hover:text-[#d4af37]"
                  ><i class="fab fa-instagram text-2xl"></i
                ></a>
                <a href="#" class="text-gray-600 hover:text-[#d4af37]"
                  ><i class="fab fa-twitter text-2xl"></i
                ></a>
                <a href="#" class="text-gray-600 hover:text-[#d4af37]"
                  ><i class="fab fa-youtube text-2xl"></i
                ></a>
              </div>
            </div>
            <div class="md:w-2/3">
              <p class="text-lg mb-4">
                Passionné de gastronomie depuis mon plus jeune âge, j'ai
                parcouru la France à la recherche des meilleures tables, des
                bistrots authentiques aux restaurants étoilés.
              </p>
              <p class="text-lg mb-4">
                Après 15 ans d'expérience dans le monde culinaire et un passage
                comme chef dans plusieurs établissements renommés, j'ai décidé
                de partager mes découvertes et mes coups de cœur avec le plus
                grand nombre.
              </p>
              <p class="text-lg mb-4">
                Mon approche est simple : une critique honnête, sans concession,
                mais toujours bienveillante. Je m'attache à mettre en lumière le
                travail des chefs passionnés et à vous guider vers des
                expériences gastronomiques inoubliables.
              </p>
              <p class="text-lg font-semibold">
                Ma philosophie : "La gastronomie est l'art de transformer un
                moment ordinaire en souvenir extraordinaire."
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Page -->
      <div id="contact" class="page hidden">
        <div class="bg-white rounded-lg shadow-md p-8">
          <h2 class="text-3xl font-bold mb-6">Contact</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <p class="text-lg mb-6">
                Vous souhaitez me proposer un restaurant à découvrir ou
                collaborer avec moi ? N'hésitez pas à me contacter !
              </p>
              <div class="mb-4">
                <h4 class="font-semibold text-lg mb-2">Email</h4>
                <p>contact@pierregourmet.fr</p>
              </div>
              <div class="mb-4">
                <h4 class="font-semibold text-lg mb-2">Réseaux sociaux</h4>
                <div class="flex space-x-4">
                  <a href="#" class="text-gray-600 hover:text-[#d4af37]"
                    ><i class="fab fa-instagram text-2xl"></i
                  ></a>
                  <a href="#" class="text-gray-600 hover:text-[#d4af37]"
                    ><i class="fab fa-twitter text-2xl"></i
                  ></a>
                  <a href="#" class="text-gray-600 hover:text-[#d4af37]"
                    ><i class="fab fa-youtube text-2xl"></i
                  ></a>
                </div>
              </div>
            </div>
            <div>
              <form id="contactForm" class="space-y-4">
                <div>
                  <label
                    for="name"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Nom</label
                  >
                  <input
                    type="text"
                    id="name"
                    name="name"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                    required
                  />
                </div>
                <div>
                  <label
                    for="email"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Email</label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                    required
                  />
                </div>
                <div>
                  <label
                    for="subject"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Sujet</label
                  >
                  <input
                    type="text"
                    id="subject"
                    name="subject"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                    required
                  />
                </div>
                <div>
                  <label
                    for="message"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Message</label
                  >
                  <textarea
                    id="message"
                    name="message"
                    rows="4"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                    required
                  ></textarea>
                </div>
                <div>
                  <button
                    type="submit"
                    class="bg-[#d4af37] hover:bg-[#b8941f] text-white px-6 py-3 rounded-md font-medium transition"
                  >
                    Envoyer
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Admin Page -->
      <div id="admin" class="page hidden">
        <div class="bg-white rounded-lg shadow-md p-8">
          <h2 class="text-3xl font-bold mb-6">Administration</h2>

          <!-- Admin Navigation -->
          <div class="mb-8 border-b border-gray-200">
            <div class="flex space-x-6">
              <button
                class="tab-button active py-2 px-1 font-medium"
                data-tab="restaurantsList"
              >
                Liste des restaurants
              </button>
              <button
                class="tab-button py-2 px-1 font-medium"
                data-tab="addRestaurant"
              >
                Ajouter un restaurant
              </button>
              <button
                class="tab-button py-2 px-1 font-medium"
                data-tab="editRestaurant"
              >
                Modifier un restaurant
              </button>
            </div>
          </div>

          <!-- Admin Content -->
          <div id="adminContent">
            <!-- Restaurants List Tab -->
            <div id="restaurantsListTab" class="admin-tab">
              <div class="overflow-x-auto">
                <table class="min-w-full bg-white">
                  <thead class="bg-gray-100">
                    <tr>
                      <th class="py-3 px-4 text-left">Nom</th>
                      <th class="py-3 px-4 text-left">Ville</th>
                      <th class="py-3 px-4 text-left">Type de cuisine</th>
                      <th class="py-3 px-4 text-left">Note</th>
                      <th class="py-3 px-4 text-left">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="adminRestaurantsList">
                    <!-- Will be populated dynamically -->
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Add Restaurant Tab -->
            <div id="addRestaurantTab" class="admin-tab hidden">
              <form id="addRestaurantForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label
                      for="name"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Nom du restaurant *</label
                    >
                    <input
                      type="text"
                      id="add-name"
                      name="name"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="chef"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Chef</label
                    >
                    <input
                      type="text"
                      id="add-chef"
                      name="chef"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="cuisine"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Type de cuisine *</label
                    >
                    <input
                      type="text"
                      id="add-cuisine"
                      name="cuisine"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="rating"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Note (1-5) *</label
                    >
                    <input
                      type="number"
                      id="add-rating"
                      name="rating"
                      min="1"
                      max="5"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="city"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Ville *</label
                    >
                    <input
                      type="text"
                      id="add-city"
                      name="city"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="address"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Adresse complète *</label
                    >
                    <input
                      type="text"
                      id="add-address"
                      name="address"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="phone"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Téléphone</label
                    >
                    <input
                      type="tel"
                      id="add-phone"
                      name="phone"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="website"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Site web</label
                    >
                    <input
                      type="url"
                      id="add-website"
                      name="website"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="priceRange"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Fourchette de prix (€-€€€€) *</label
                    >
                    <select
                      id="add-priceRange"
                      name="priceRange"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    >
                      <option value="€">€ (Abordable)</option>
                      <option value="€€">€€ (Modéré)</option>
                      <option value="€€€">€€€ (Élevé)</option>
                      <option value="€€€€">€€€€ (Très élevé)</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="lat"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Latitude</label
                    >
                    <input
                      type="number"
                      id="add-lat"
                      name="lat"
                      step="0.000001"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="lng"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Longitude</label
                    >
                    <input
                      type="number"
                      id="add-lng"
                      name="lng"
                      step="0.000001"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                </div>

                <div>
                  <label
                    for="description"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Description *</label
                  >
                  <textarea
                    id="add-description"
                    name="description"
                    rows="4"
                    class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    required
                  ></textarea>
                </div>

                <div>
                  <label
                    for="bill"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >L'addition de Pierre</label
                  >
                  <textarea
                    id="add-bill"
                    name="bill"
                    rows="3"
                    class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                  ></textarea>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Menus</label
                  >
                  <div id="add-menus-container" class="space-y-4">
                    <div
                      class="menu-item border border-gray-300 rounded-md p-4"
                    >
                      <div class="flex justify-between mb-2">
                        <h4 class="font-medium">Menu 1</h4>
                        <button
                          type="button"
                          class="text-red-500 hover:text-red-700"
                          onclick="removeMenu(this)"
                        >
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                      <div class="space-y-3">
                        <div>
                          <label
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >Nom du menu</label
                          >
                          <input
                            type="text"
                            name="menuName"
                            class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                          />
                        </div>
                        <div>
                          <label
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >Prix</label
                          >
                          <input
                            type="text"
                            name="menuPrice"
                            class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                          />
                        </div>
                        <div>
                          <label
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >Description</label
                          >
                          <textarea
                            name="menuDescription"
                            rows="2"
                            class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                          ></textarea>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button
                    type="button"
                    id="add-menu-btn"
                    class="mt-2 text-[#d4af37] hover:text-[#b8941f] font-medium"
                  >
                    <i class="fas fa-plus mr-1"></i> Ajouter un menu
                  </button>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Photos (URLs)</label
                  >
                  <div id="add-photos-container" class="space-y-2">
                    <div class="flex items-center space-x-2">
                      <input
                        type="text"
                        name="photo"
                        placeholder="URL de l'image"
                        class="admin-input flex-1 border border-gray-300 rounded-md px-3 py-2"
                      />
                      <button
                        type="button"
                        class="text-red-500 hover:text-red-700"
                        onclick="removePhoto(this)"
                      >
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                  <button
                    type="button"
                    id="add-photo-btn"
                    class="mt-2 text-[#d4af37] hover:text-[#b8941f] font-medium"
                  >
                    <i class="fas fa-plus mr-1"></i> Ajouter une photo
                  </button>
                </div>

                <div class="pt-4 border-t border-gray-200">
                  <button
                    type="submit"
                    class="bg-[#d4af37] hover:bg-[#b8941f] text-white px-6 py-3 rounded-md font-medium transition"
                  >
                    Ajouter le restaurant
                  </button>
                </div>
              </form>
            </div>

            <!-- Edit Restaurant Tab -->
            <div id="editRestaurantTab" class="admin-tab hidden">
              <div class="mb-6">
                <label
                  for="restaurantToEdit"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Sélectionner un restaurant à modifier</label
                >
                <select
                  id="restaurantToEdit"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
                >
                  <option value="">-- Choisir un restaurant --</option>
                  <!-- Will be populated dynamically -->
                </select>
              </div>

              <form id="editRestaurantForm" class="space-y-6 hidden">
                <input type="hidden" id="edit-id" />
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label
                      for="edit-name"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Nom du restaurant *</label
                    >
                    <input
                      type="text"
                      id="edit-name"
                      name="name"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="edit-chef"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Chef</label
                    >
                    <input
                      type="text"
                      id="edit-chef"
                      name="chef"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="edit-cuisine"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Type de cuisine *</label
                    >
                    <input
                      type="text"
                      id="edit-cuisine"
                      name="cuisine"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="edit-rating"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Note (1-5) *</label
                    >
                    <input
                      type="number"
                      id="edit-rating"
                      name="rating"
                      min="1"
                      max="5"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="edit-city"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Ville *</label
                    >
                    <input
                      type="text"
                      id="edit-city"
                      name="city"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="edit-address"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Adresse complète *</label
                    >
                    <input
                      type="text"
                      id="edit-address"
                      name="address"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="edit-phone"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Téléphone</label
                    >
                    <input
                      type="tel"
                      id="edit-phone"
                      name="phone"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="edit-website"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Site web</label
                    >
                    <input
                      type="url"
                      id="edit-website"
                      name="website"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="edit-priceRange"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Fourchette de prix (€-€€€€) *</label
                    >
                    <select
                      id="edit-priceRange"
                      name="priceRange"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                      required
                    >
                      <option value="€">€ (Abordable)</option>
                      <option value="€€">€€ (Modéré)</option>
                      <option value="€€€">€€€ (Élevé)</option>
                      <option value="€€€€">€€€€ (Très élevé)</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="edit-lat"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Latitude</label
                    >
                    <input
                      type="number"
                      id="edit-lat"
                      name="lat"
                      step="0.000001"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                  <div>
                    <label
                      for="edit-lng"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Longitude</label
                    >
                    <input
                      type="number"
                      id="edit-lng"
                      name="lng"
                      step="0.000001"
                      class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    />
                  </div>
                </div>

                <div>
                  <label
                    for="edit-description"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Description *</label
                  >
                  <textarea
                    id="edit-description"
                    name="description"
                    rows="4"
                    class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                    required
                  ></textarea>
                </div>

                <div>
                  <label
                    for="edit-bill"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >L'addition de Pierre</label
                  >
                  <textarea
                    id="edit-bill"
                    name="bill"
                    rows="3"
                    class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"
                  ></textarea>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Menus</label
                  >
                  <div id="edit-menus-container" class="space-y-4">
                    <!-- Will be populated dynamically -->
                  </div>
                  <button
                    type="button"
                    id="edit-menu-btn"
                    class="mt-2 text-[#d4af37] hover:text-[#b8941f] font-medium"
                  >
                    <i class="fas fa-plus mr-1"></i> Ajouter un menu
                  </button>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1"
                    >Photos (URLs)</label
                  >
                  <div id="edit-photos-container" class="space-y-2">
                    <!-- Will be populated dynamically -->
                  </div>
                  <button
                    type="button"
                    id="edit-photo-btn"
                    class="mt-2 text-[#d4af37] hover:text-[#b8941f] font-medium"
                  >
                    <i class="fas fa-plus mr-1"></i> Ajouter une photo
                  </button>
                </div>

                <div class="pt-4 border-t border-gray-200">
                  <button
                    type="submit"
                    class="bg-[#d4af37] hover:bg-[#b8941f] text-white px-6 py-3 rounded-md font-medium transition"
                  >
                    Enregistrer les modifications
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#2c3e50] text-white py-8">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between">
          <div class="mb-6 md:mb-0">
            <h3 class="text-xl font-bold mb-4">Pierre Gourmet</h3>
            <p class="text-gray-300 max-w-md">
              Découvrez les meilleures tables de France à travers les yeux d'un
              passionné de gastronomie.
            </p>
          </div>
          <div class="mb-6 md:mb-0">
            <h4 class="text-lg font-semibold mb-4">Navigation</h4>
            <ul class="space-y-2">
              <li>
                <a
                  href="#"
                  class="text-gray-300 hover:text-white transition"
                  onclick="showPage('home')"
                  >Accueil</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-300 hover:text-white transition"
                  onclick="showPage('about')"
                  >À propos</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="text-gray-300 hover:text-white transition"
                  onclick="showPage('contact')"
                  >Contact</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-4">Suivez-moi</h4>
            <div class="flex space-x-4">
              <a href="#" class="text-gray-300 hover:text-white transition"
                ><i class="fab fa-instagram text-2xl"></i
              ></a>
              <a href="#" class="text-gray-300 hover:text-white transition"
                ><i class="fab fa-twitter text-2xl"></i
              ></a>
              <a href="#" class="text-gray-300 hover:text-white transition"
                ><i class="fab fa-youtube text-2xl"></i
              ></a>
            </div>
          </div>
        </div>
        <div
          class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400"
        >
          <p>&copy; 2023 Pierre Gourmet. Tous droits réservés.</p>
        </div>
      </div>
    </footer>

    <!-- Login Modal -->
    <div
      id="loginModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-white rounded-lg p-8 max-w-md w-full">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-2xl font-bold">Connexion administrateur</h3>
          <button
            id="closeLoginModal"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>
        <form id="loginForm" class="space-y-4">
          <div>
            <label
              for="username"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Nom d'utilisateur</label
            >
            <input
              type="text"
              id="username"
              name="username"
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
              required
            />
          </div>
          <div>
            <label
              for="password"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Mot de passe</label
            >
            <input
              type="password"
              id="password"
              name="password"
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#d4af37]"
              required
            />
          </div>
          <div id="loginError" class="text-red-500 hidden">
            Identifiants incorrects. Veuillez réessayer.
          </div>
          <div class="pt-4">
            <button
              type="submit"
              class="w-full bg-[#d4af37] hover:bg-[#b8941f] text-white px-6 py-3 rounded-md font-medium transition"
            >
              Se connecter
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Sample data
      const sampleRestaurants = [
        {
          id: 1,
          name: "L'Ambroisie",
          chef: "Bernard Pacaud",
          cuisine: "Gastronomique française",
          rating: 5,
          city: "Paris",
          address: "9 Place des Vosges, 75004 Paris",
          phone: "01 42 78 51 45",
          website: "https://www.ambroisie-paris.com",
          priceRange: "€€€€",
          lat: 48.8554,
          lng: 2.3671,
          description:
            "Niché au cœur de la Place des Vosges, L'Ambroisie est une institution de la haute gastronomie française. Dans un cadre somptueux du XVIIe siècle, le chef Bernard Pacaud propose une cuisine d'une précision et d'une finesse rares, couronnée de trois étoiles Michelin depuis 1988.",
          bill: "Menu dégustation : environ 380€ par personne, hors boissons. Une expérience exceptionnelle qui justifie son prix par la qualité irréprochable des produits et le service impeccable.",
          menus: [
            {
              name: "Menu Dégustation",
              price: "380€",
              description:
                "Une succession de plats emblématiques de la maison, adaptés aux produits de saison.",
            },
            {
              name: "Menu Prestige",
              price: "450€",
              description:
                "Une expérience gastronomique complète incluant les créations les plus raffinées du chef.",
            },
          ],
          photos: [
            "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",
            "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",
          ],
        },
        {
          id: 2,
          name: "Le Petit Nice",
          chef: "Gérald Passédat",
          cuisine: "Méditerranéenne",
          rating: 4,
          city: "Marseille",
          address: "Anse de Maldormé, Corniche J. F. Kennedy, 13007 Marseille",
          phone: "04 91 59 25 92",
          website: "https://www.passedat.fr",
          priceRange: "€€€",
          lat: 43.2805,
          lng: 5.3541,
          description:
            "Surplombant la Méditerranée, Le Petit Nice est l'écrin où Gérald Passédat célèbre la mer à travers une cuisine inventive et respectueuse des produits. Ce restaurant trois étoiles propose une expérience sensorielle unique, où chaque plat raconte une histoire maritime.",
          bill: "Menu 'Bouille Abaisse' : 295€ par personne. Un voyage gustatif à travers la Méditerranée qui vaut chaque euro dépensé.",
          menus: [
            {
              name: "Menu Bouille Abaisse",
              price: "295€",
              description:
                "Une réinterprétation de la bouillabaisse traditionnelle en plusieurs services.",
            },
            {
              name: "Menu Grand Large",
              price: "360€",
              description:
                "Une exploration complète des trésors de la Méditerranée.",
            },
          ],
          photos: [
            "https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",
            "https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",
          ],
        },
        {
          id: 3,
          name: "Bistrot du Coin",
          chef: "Marie Dupont",
          cuisine: "Bistrot traditionnel",
          rating: 3,
          city: "Lyon",
          address: "24 Rue de la République, 69002 Lyon",
          phone: "04 78 42 15 30",
          website: "https://www.bistrotducoin.fr",
          priceRange: "€€",
          lat: 45.764,
          lng: 4.8357,
          description:
            "Le Bistrot du Coin incarne l'esprit des bouchons lyonnais avec une touche contemporaine. Dans une ambiance chaleureuse, Marie Dupont revisite les classiques de la cuisine lyonnaise avec des produits frais et locaux.",
          bill: "Menu du jour : 28€ pour entrée-plat-dessert. Un excellent rapport qualité-prix pour une cuisine authentique et généreuse.",
          menus: [
            {
              name: "Menu du Jour",
              price: "28€",
              description:
                "Entrée, plat et dessert, selon le marché et l'inspiration du chef.",
            },
            {
              name: "Menu Dégustation",
              price: "45€",
              description:
                "Une sélection des spécialités de la maison en 5 services.",
            },
          ],
          photos: [
            "https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",
            "https://images.unsplash.com/photo-1533777857889-4be7c70b33f7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80",
          ],
        },
      ];

      // Admin credentials
      const adminCredentials = {
        username: "admin",
        password: "admin123",
      };

      // Global variables
      let restaurants = [];
      let map = null;
      let markers = [];
      let isLoggedIn = false;

      // DOM Elements
      const mobileMenuButton = document.getElementById("mobileMenuButton");
      const mobileMenu = document.getElementById("mobileMenu");
      const adminButton = document.getElementById("adminButton");
      const mobileAdminButton = document.getElementById("mobileAdminButton");
      const loginModal = document.getElementById("loginModal");
      const closeLoginModal = document.getElementById("closeLoginModal");
      const loginForm = document.getElementById("loginForm");
      const loginError = document.getElementById("loginError");
      const viewToggleBtns = document.querySelectorAll(".view-toggle-btn");
      const listView = document.getElementById("listView");
      const mapView = document.getElementById("mapView");
      const cityFilter = document.getElementById("cityFilter");
      const cuisineFilter = document.getElementById("cuisineFilter");
      const ratingFilter = document.getElementById("ratingFilter");
      const tabButtons = document.querySelectorAll(".tab-button");
      const addMenuBtn = document.getElementById("add-menu-btn");
      const addPhotoBtn = document.getElementById("add-photo-btn");
      const editMenuBtn = document.getElementById("edit-menu-btn");
      const editPhotoBtn = document.getElementById("edit-photo-btn");
      const addRestaurantForm = document.getElementById("addRestaurantForm");
      const editRestaurantForm = document.getElementById("editRestaurantForm");
      const restaurantToEdit = document.getElementById("restaurantToEdit");
      const contactForm = document.getElementById("contactForm");

      // Initialize the application
      document.addEventListener("DOMContentLoaded", () => {
        // Load restaurants from localStorage or use sample data
        loadRestaurants();

        // Initialize the map
        initMap();

        // Render restaurants
        renderRestaurants();

        // Populate filters
        populateFilters();

        // Setup event listeners
        setupEventListeners();
      });

      // Load restaurants from localStorage or use sample data
      function loadRestaurants() {
        const storedRestaurants = localStorage.getItem("restaurants");
        if (storedRestaurants) {
          restaurants = JSON.parse(storedRestaurants);
        } else {
          restaurants = sampleRestaurants;
          saveRestaurants();
        }
      }

      // Save restaurants to localStorage
      function saveRestaurants() {
        localStorage.setItem("restaurants", JSON.stringify(restaurants));
      }

      // Initialize the map
      function initMap() {
        map = L.map("map").setView([46.603354, 1.888334], 6); // Center on France

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution:
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(map);
      }

      // Render restaurants on the page
      function renderRestaurants() {
        renderRestaurantsList();
        renderRestaurantsMap();
        renderAdminRestaurantsList();
        populateRestaurantToEditDropdown();
      }

      // Render restaurants list
      function renderRestaurantsList() {
        const restaurantsList = document.getElementById("restaurantsList");
        restaurantsList.innerHTML = "";

        if (restaurants.length === 0) {
          restaurantsList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <p class="text-gray-500 text-lg">Aucun restaurant trouvé.</p>
                    </div>
                `;
          return;
        }

        restaurants.forEach((restaurant) => {
          const stars =
            "★".repeat(restaurant.rating) + "☆".repeat(5 - restaurant.rating);

          const card = document.createElement("div");
          card.className =
            "restaurant-card bg-white rounded-lg shadow-md overflow-hidden";
          card.innerHTML = `
                    <div class="h-48 bg-gray-200 relative overflow-hidden">
                        ${
                          restaurant.photos && restaurant.photos.length > 0
                            ? `<img src="${restaurant.photos[0]}" alt="${restaurant.name}" class="w-full h-full object-cover">`
                            : `<div class="w-full h-full flex items-center justify-center bg-gray-200">
                                <i class="fas fa-utensils text-4xl text-gray-400"></i>
                            </div>`
                        }
                        <div class="absolute top-0 right-0 bg-white bg-opacity-90 px-3 py-1 m-2 rounded-full">
                            <span class="gold-star">${stars}</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold">${
                              restaurant.name
                            }</h3>
                            <span class="text-gray-700">${
                              restaurant.priceRange
                            }</span>
                        </div>
                        <p class="text-gray-600 mb-2">${restaurant.cuisine}</p>
                        <p class="text-gray-600 mb-4"><i class="fas fa-map-marker-alt mr-2"></i>${
                          restaurant.city
                        }</p>
                        <p class="text-gray-700 mb-4 line-clamp-2">${restaurant.description.substring(
                          0,
                          100
                        )}${
            restaurant.description.length > 100 ? "..." : ""
          }</p>
                        <button class="view-detail-btn bg-[#d4af37] hover:bg-[#b8941f] text-white px-4 py-2 rounded-md font-medium transition w-full" data-id="${
                          restaurant.id
                        }">Voir le détail</button>
                    </div>
                `;

          restaurantsList.appendChild(card);
        });

        // Add event listeners to view detail buttons
        document.querySelectorAll(".view-detail-btn").forEach((button) => {
          button.addEventListener("click", () => {
            const restaurantId = parseInt(button.getAttribute("data-id"));
            showRestaurantDetail(restaurantId);
          });
        });
      }

      // Render restaurants on the map
      function renderRestaurantsMap() {
        // Clear existing markers
        markers.forEach((marker) => map.removeLayer(marker));
        markers = [];

        restaurants.forEach((restaurant) => {
          if (restaurant.lat && restaurant.lng) {
            const marker = L.marker([restaurant.lat, restaurant.lng]).addTo(
              map
            );

            marker.bindPopup(`
                        <div class="p-2">
                            <h3 class="font-bold">${restaurant.name}</h3>
                            <p class="text-sm">${restaurant.cuisine}</p>
                            <p class="text-sm gold-star">${"★".repeat(
                              restaurant.rating
                            )}</p>
                            <button class="map-detail-btn bg-[#d4af37] hover:bg-[#b8941f] text-white px-2 py-1 rounded text-sm mt-2" data-id="${
                              restaurant.id
                            }">Voir le détail</button>
                        </div>
                    `);

            marker.on("popupopen", () => {
              document
                .querySelector(`.map-detail-btn[data-id="${restaurant.id}"]`)
                .addEventListener("click", () => {
                  showRestaurantDetail(restaurant.id);
                });
            });

            markers.push(marker);
          }
        });

        // Adjust map view if there are markers
        if (markers.length > 0) {
          const group = new L.featureGroup(markers);
          map.fitBounds(group.getBounds().pad(0.1));
        }
      }

      // Render restaurants list in admin panel
      function renderAdminRestaurantsList() {
        const adminRestaurantsList = document.getElementById(
          "adminRestaurantsList"
        );
        adminRestaurantsList.innerHTML = "";

        restaurants.forEach((restaurant) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="py-3 px-4 border-b">${restaurant.name}</td>
                    <td class="py-3 px-4 border-b">${restaurant.city}</td>
                    <td class="py-3 px-4 border-b">${restaurant.cuisine}</td>
                    <td class="py-3 px-4 border-b">${"★".repeat(
                      restaurant.rating
                    )}</td>
                    <td class="py-3 px-4 border-b">
                        <button class="admin-edit-btn text-blue-600 hover:text-blue-800 mr-3" data-id="${
                          restaurant.id
                        }">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="admin-delete-btn text-red-600 hover:text-red-800" data-id="${
                          restaurant.id
                        }">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;

          adminRestaurantsList.appendChild(row);
        });

        // Add event listeners to admin buttons
        document.querySelectorAll(".admin-edit-btn").forEach((button) => {
          button.addEventListener("click", () => {
            const restaurantId = parseInt(button.getAttribute("data-id"));
            showEditRestaurantForm(restaurantId);
          });
        });

        document.querySelectorAll(".admin-delete-btn").forEach((button) => {
          button.addEventListener("click", () => {
            const restaurantId = parseInt(button.getAttribute("data-id"));
            if (confirm("Êtes-vous sûr de vouloir supprimer ce restaurant ?")) {
              deleteRestaurant(restaurantId);
            }
          });
        });
      }

      // Populate restaurant to edit dropdown
      function populateRestaurantToEditDropdown() {
        restaurantToEdit.innerHTML =
          '<option value="">-- Choisir un restaurant --</option>';

        restaurants.forEach((restaurant) => {
          const option = document.createElement("option");
          option.value = restaurant.id;
          option.textContent = restaurant.name;
          restaurantToEdit.appendChild(option);
        });
      }

      // Populate filters
      function populateFilters() {
        // Get unique cities
        const cities = [...new Set(restaurants.map((r) => r.city))];
        cities.sort();

        // Get unique cuisines
        const cuisines = [...new Set(restaurants.map((r) => r.cuisine))];
        cuisines.sort();

        // Populate city filter
        cityFilter.innerHTML = '<option value="">Toutes les villes</option>';
        cities.forEach((city) => {
          const option = document.createElement("option");
          option.value = city;
          option.textContent = city;
          cityFilter.appendChild(option);
        });

        // Populate cuisine filter
        cuisineFilter.innerHTML = '<option value="">Tous les types</option>';
        cuisines.forEach((cuisine) => {
          const option = document.createElement("option");
          option.value = cuisine;
          option.textContent = cuisine;
          cuisineFilter.appendChild(option);
        });
      }

      // Setup event listeners
      function setupEventListeners() {
        // Mobile menu toggle
        mobileMenuButton.addEventListener("click", () => {
          mobileMenu.classList.toggle("hidden");
        });

        // Admin button
        adminButton.addEventListener("click", (e) => {
          e.preventDefault();
          if (isLoggedIn) {
            showPage("admin");
          } else {
            showLoginModal();
          }
        });

        // Mobile admin button
        mobileAdminButton.addEventListener("click", (e) => {
          e.preventDefault();
          mobileMenu.classList.add("hidden");
          if (isLoggedIn) {
            showPage("admin");
          } else {
            showLoginModal();
          }
        });

        // Close login modal
        closeLoginModal.addEventListener("click", () => {
          loginModal.classList.add("hidden");
        });

        // Login form submission
        loginForm.addEventListener("submit", (e) => {
          e.preventDefault();
          const username = document.getElementById("username").value;
          const password = document.getElementById("password").value;

          if (
            username === adminCredentials.username &&
            password === adminCredentials.password
          ) {
            isLoggedIn = true;
            loginModal.classList.add("hidden");
            showPage("admin");
            loginError.classList.add("hidden");
          } else {
            loginError.classList.remove("hidden");
          }
        });

        // View toggle buttons
        viewToggleBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            const view = btn.getAttribute("data-view");

            // Update active button
            viewToggleBtns.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");

            // Show selected view
            if (view === "list") {
              listView.classList.remove("hidden");
              mapView.classList.add("hidden");
            } else {
              listView.classList.add("hidden");
              mapView.classList.remove("hidden");
              // Refresh map
              setTimeout(() => {
                map.invalidateSize();
                if (markers.length > 0) {
                  const group = new L.featureGroup(markers);
                  map.fitBounds(group.getBounds().pad(0.1));
                }
              }, 100);
            }
          });
        });

        // Filters
        cityFilter.addEventListener("change", applyFilters);
        cuisineFilter.addEventListener("change", applyFilters);
        ratingFilter.addEventListener("change", applyFilters);

        // Admin tab buttons
        tabButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const tab = button.getAttribute("data-tab");

            // Update active button
            tabButtons.forEach((b) => b.classList.remove("active"));
            button.classList.add("active");

            // Show selected tab
            document
              .querySelectorAll(".admin-tab")
              .forEach((t) => t.classList.add("hidden"));
            document.getElementById(`${tab}Tab`).classList.remove("hidden");
          });
        });

        // Add menu button
        addMenuBtn.addEventListener("click", () => {
          addMenuField("add-menus-container");
        });

        // Add photo button
        addPhotoBtn.addEventListener("click", () => {
          addPhotoField("add-photos-container");
        });

        // Edit menu button
        editMenuBtn.addEventListener("click", () => {
          addMenuField("edit-menus-container");
        });

        // Edit photo button
        editPhotoBtn.addEventListener("click", () => {
          addPhotoField("edit-photos-container");
        });

        // Add restaurant form submission
        addRestaurantForm.addEventListener("submit", (e) => {
          e.preventDefault();
          addRestaurant();
        });

        // Edit restaurant form submission
        editRestaurantForm.addEventListener("submit", (e) => {
          e.preventDefault();
          updateRestaurant();
        });

        // Restaurant to edit dropdown
        restaurantToEdit.addEventListener("change", () => {
          const restaurantId = parseInt(restaurantToEdit.value);
          if (restaurantId) {
            loadRestaurantToEditForm(restaurantId);
          } else {
            editRestaurantForm.classList.add("hidden");
          }
        });

        // Contact form submission
        contactForm.addEventListener("submit", (e) => {
          e.preventDefault();
          alert("Votre message a été envoyé avec succès !");
          contactForm.reset();
        });
      }

      // Show login modal
      function showLoginModal() {
        loginModal.classList.remove("hidden");
        document.getElementById("username").focus();
      }

      // Show page
      function showPage(pageId) {
        // Hide all pages
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.add("hidden");
        });

        // Show selected page
        document.getElementById(pageId).classList.remove("hidden");

        // Refresh map if showing home page
        if (pageId === "home" && !listView.classList.contains("hidden")) {
          setTimeout(() => {
            map.invalidateSize();
          }, 100);
        }

        // Scroll to top
        window.scrollTo(0, 0);
      }

      // Show restaurant detail
      function showRestaurantDetail(restaurantId) {
        const restaurant = restaurants.find((r) => r.id === restaurantId);
        if (!restaurant) return;

        const restaurantDetailContent = document.getElementById(
          "restaurantDetailContent"
        );

        // Generate stars HTML
        const starsHTML = Array(5)
          .fill()
          .map(
            (_, i) =>
              `<i class="fas fa-star ${
                i < restaurant.rating ? "gold-star" : "text-gray-300"
              }"></i>`
          )
          .join("");

        // Generate photos HTML
        let photosHTML = "";
        if (restaurant.photos && restaurant.photos.length > 0) {
          photosHTML = `
                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">Photos</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${restaurant.photos
                              .map(
                                (photo) => `
                                <div class="rounded-lg overflow-hidden h-48">
                                    <img src="${photo}" alt="${restaurant.name}" class="w-full h-full object-cover">
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        }

        // Generate menus HTML
        let menusHTML = "";
        if (restaurant.menus && restaurant.menus.length > 0) {
          menusHTML = `
                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">Menus</h3>
                        <div class="space-y-4">
                            ${restaurant.menus
                              .map(
                                (menu) => `
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="flex justify-between items-center mb-2">
                                        <h4 class="text-lg font-medium">${menu.name}</h4>
                                        <span class="font-semibold">${menu.price}</span>
                                    </div>
                                    <p class="text-gray-700">${menu.description}</p>
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        }

        // Generate bill HTML
        let billHTML = "";
        if (restaurant.bill) {
          billHTML = `
                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">L'addition de Pierre</h3>
                        <div class="bg-[#f9f7f3] border-l-4 border-[#d4af37] p-4 italic">
                            <p class="text-gray-700">${restaurant.bill}</p>
                        </div>
                    </div>
                `;
        }

        // Generate contact info HTML
        let contactHTML = `
                <div class="mb-8">
                    <h3 class="text-2xl font-semibold mb-4">Informations pratiques</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <p class="font-medium mb-1">Adresse</p>
                            <p class="text-gray-700">${restaurant.address}</p>
                        </div>
                        ${
                          restaurant.phone
                            ? `
                            <div>
                                <p class="font-medium mb-1">Téléphone</p>
                                <p class="text-gray-700">${restaurant.phone}</p>
                            </div>
                        `
                            : ""
                        }
                        ${
                          restaurant.website
                            ? `
                            <div>
                                <p class="font-medium mb-1">Site web</p>
                                <a href="${restaurant.website}" target="_blank" class="text-[#d4af37] hover:underline">${restaurant.website}</a>
                            </div>
                        `
                            : ""
                        }
                        <div>
                            <p class="font-medium mb-1">Fourchette de prix</p>
                            <p class="text-gray-700">${
                              restaurant.priceRange
                            }</p>
                        </div>
                    </div>
                </div>
            `;

        // Generate map HTML
        let mapHTML = "";
        if (restaurant.lat && restaurant.lng) {
          mapHTML = `
                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">Localisation</h3>
                        <div id="detailMap" class="h-64 rounded-lg"></div>
                    </div>
                `;
        }

        // Set the content
        restaurantDetailContent.innerHTML = `
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="h-64 md:h-96 bg-gray-200 relative">
                        ${
                          restaurant.photos && restaurant.photos.length > 0
                            ? `<img src="${restaurant.photos[0]}" alt="${restaurant.name}" class="w-full h-full object-cover">`
                            : `<div class="w-full h-full flex items-center justify-center bg-gray-200">
                                <i class="fas fa-utensils text-6xl text-gray-400"></i>
                            </div>`
                        }
                    </div>
                    <div class="p-6 md:p-8">
                        <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-4">
                            <h2 class="text-3xl font-bold mb-2 md:mb-0">${
                              restaurant.name
                            }</h2>
                            <div class="flex items-center">
                                <div class="mr-4">${starsHTML}</div>
                                <span class="text-gray-700">${
                                  restaurant.priceRange
                                }</span>
                            </div>
                        </div>
                        <div class="mb-6">
                            <p class="text-gray-600 mb-1">${
                              restaurant.cuisine
                            }</p>
                            <p class="text-gray-600"><i class="fas fa-map-marker-alt mr-2"></i>${
                              restaurant.city
                            }</p>
                            ${
                              restaurant.chef
                                ? `<p class="text-gray-600 mt-1"><i class="fas fa-user-chef mr-2"></i>Chef: ${restaurant.chef}</p>`
                                : ""
                            }
                        </div>
                        <div class="mb-8">
                            <h3 class="text-2xl font-semibold mb-4">À propos</h3>
                            <p class="text-gray-700 leading-relaxed">${
                              restaurant.description
                            }</p>
                        </div>
                        ${billHTML}
                        ${menusHTML}
                        ${photosHTML}
                        ${contactHTML}
                        ${mapHTML}
                    </div>
                </div>
            `;

        // Show the detail page
        showPage("restaurantDetail");

        // Initialize the detail map if needed
        if (restaurant.lat && restaurant.lng) {
          setTimeout(() => {
            const detailMap = L.map("detailMap").setView(
              [restaurant.lat, restaurant.lng],
              15
            );

            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
              attribution:
                '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            }).addTo(detailMap);

            L.marker([restaurant.lat, restaurant.lng])
              .addTo(detailMap)
              .bindPopup(`<b>${restaurant.name}</b><br>${restaurant.address}`);
          }, 100);
        }
      }

      // Apply filters
      function applyFilters() {
        const city = cityFilter.value;
        const cuisine = cuisineFilter.value;
        const rating = parseInt(ratingFilter.value);

        // Load all restaurants
        loadRestaurants();

        // Apply filters
        if (city) {
          restaurants = restaurants.filter((r) => r.city === city);
        }

        if (cuisine) {
          restaurants = restaurants.filter((r) => r.cuisine === cuisine);
        }

        if (rating > 0) {
          restaurants = restaurants.filter((r) => r.rating >= rating);
        }

        // Render filtered restaurants
        renderRestaurantsList();
        renderRestaurantsMap();
      }

      // Add a new menu field
      function addMenuField(containerId) {
        const container = document.getElementById(containerId);
        const menuCount = container.children.length + 1;

        const menuItem = document.createElement("div");
        menuItem.className = "menu-item border border-gray-300 rounded-md p-4";
        menuItem.innerHTML = `
                <div class="flex justify-between mb-2">
                    <h4 class="font-medium">Menu ${menuCount}</h4>
                    <button type="button" class="text-red-500 hover:text-red-700" onclick="removeMenu(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nom du menu</label>
                        <input type="text" name="menuName" class="admin-input w-full border border-gray-300 rounded-md px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Prix</label>
                        <input type="text" name="menuPrice" class="admin-input w-full border border-gray-300 rounded-md px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea name="menuDescription" rows="2" class="admin-input w-full border border-gray-300 rounded-md px-3 py-2"></textarea>
                    </div>
                </div>
            `;

        container.appendChild(menuItem);
      }

      // Remove a menu field
      function removeMenu(button) {
        const menuItem = button.closest(".menu-item");
        menuItem.remove();
      }

      // Add a new photo field
      function addPhotoField(containerId) {
        const container = document.getElementById(containerId);

        const photoItem = document.createElement("div");
        photoItem.className = "flex items-center space-x-2";
        photoItem.innerHTML = `
                <input type="text" name="photo" placeholder="URL de l'image" class="admin-input flex-1 border border-gray-300 rounded-md px-3 py-2">
                <button type="button" class="text-red-500 hover:text-red-700" onclick="removePhoto(this)">
                    <i class="fas fa-trash"></i>
                </button>
            `;

        container.appendChild(photoItem);
      }

      // Remove a photo field
      function removePhoto(button) {
        const photoItem = button.closest("div");
        photoItem.remove();
      }

      // Add a new restaurant
      function addRestaurant() {
        // Get form values
        const name = document.getElementById("add-name").value;
        const chef = document.getElementById("add-chef").value;
        const cuisine = document.getElementById("add-cuisine").value;
        const rating = parseInt(document.getElementById("add-rating").value);
        const city = document.getElementById("add-city").value;
        const address = document.getElementById("add-address").value;
        const phone = document.getElementById("add-phone").value;
        const website = document.getElementById("add-website").value;
        const priceRange = document.getElementById("add-priceRange").value;
        const lat =
          parseFloat(document.getElementById("add-lat").value) || null;
        const lng =
          parseFloat(document.getElementById("add-lng").value) || null;
        const description = document.getElementById("add-description").value;
        const bill = document.getElementById("add-bill").value;

        // Get menus
        const menuItems = document.querySelectorAll(
          "#add-menus-container .menu-item"
        );
        const menus = [];

        menuItems.forEach((item) => {
          const menuName = item.querySelector('[name="menuName"]').value;
          const menuPrice = item.querySelector('[name="menuPrice"]').value;
          const menuDescription = item.querySelector(
            '[name="menuDescription"]'
          ).value;

          if (menuName || menuPrice || menuDescription) {
            menus.push({
              name: menuName,
              price: menuPrice,
              description: menuDescription,
            });
          }
        });

        // Get photos
        const photoInputs = document.querySelectorAll(
          '#add-photos-container [name="photo"]'
        );
        const photos = [];

        photoInputs.forEach((input) => {
          if (input.value) {
            photos.push(input.value);
          }
        });

        // Create new restaurant object
        const newRestaurant = {
          id: Date.now(), // Use timestamp as ID
          name,
          chef,
          cuisine,
          rating,
          city,
          address,
          phone,
          website,
          priceRange,
          lat,
          lng,
          description,
          bill,
          menus,
          photos,
        };

        // Add to restaurants array
        restaurants.push(newRestaurant);

        // Save to localStorage
        saveRestaurants();

        // Refresh the UI
        renderRestaurants();
        populateFilters();

        // Reset the form
        addRestaurantForm.reset();
        document.getElementById("add-menus-container").innerHTML = "";
        document.getElementById("add-photos-container").innerHTML = "";
        addMenuField("add-menus-container");
        addPhotoField("add-photos-container");

        // Show success message
        alert("Restaurant ajouté avec succès !");

        // Switch to restaurants list tab
        document
          .querySelector('.tab-button[data-tab="restaurantsList"]')
          .click();
      }

      // Load restaurant data to edit form
      function loadRestaurantToEditForm(restaurantId) {
        const restaurant = restaurants.find((r) => r.id === restaurantId);
        if (!restaurant) return;

        // Set form values
        document.getElementById("edit-id").value = restaurant.id;
        document.getElementById("edit-name").value = restaurant.name;
        document.getElementById("edit-chef").value = restaurant.chef || "";
        document.getElementById("edit-cuisine").value = restaurant.cuisine;
        document.getElementById("edit-rating").value = restaurant.rating;
        document.getElementById("edit-city").value = restaurant.city;
        document.getElementById("edit-address").value = restaurant.address;
        document.getElementById("edit-phone").value = restaurant.phone || "";
        document.getElementById("edit-website").value =
          restaurant.website || "";
        document.getElementById("edit-priceRange").value =
          restaurant.priceRange;
        document.getElementById("edit-lat").value = restaurant.lat || "";
        document.getElementById("edit-lng").value = restaurant.lng || "";
        document.getElementById("edit-description").value =
          restaurant.description;
        document.getElementById("edit-bill").value = restaurant.bill || "";

        // Set menus
        const editMenusContainer = document.getElementById(
          "edit-menus-container"
        );
        editMenusContainer.innerHTML = "";

        if (restaurant.menus && restaurant.menus.length > 0) {
          restaurant.menus.forEach((menu, index) => {
            const menuItem = document.createElement("div");
            menuItem.className =
              "menu-item border border-gray-300 rounded-md p-4";
            menuItem.innerHTML = `
                        <div class="flex justify-between mb-2">
                            <h4 class="font-medium">Menu ${index + 1}</h4>
                            <button type="button" class="text-red-500 hover:text-red-700" onclick="removeMenu(this)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nom du menu</label>
                                <input type="text" name="menuName" value="${
                                  menu.name || ""
                                }" class="admin-input w-full border border-gray-300 rounded-md px-3 py-2">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Prix</label>
                                <input type="text" name="menuPrice" value="${
                                  menu.price || ""
                                }" class="admin-input w-full border border-gray-300 rounded-md px-3 py-2">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                <textarea name="menuDescription" rows="2" class="admin-input w-full border border-gray-300 rounded-md px-3 py-2">${
                                  menu.description || ""
                                }</textarea>
                            </div>
                        </div>
                    `;

            editMenusContainer.appendChild(menuItem);
          });
        } else {
          addMenuField("edit-menus-container");
        }

        // Set photos
        const editPhotosContainer = document.getElementById(
          "edit-photos-container"
        );
        editPhotosContainer.innerHTML = "";

        if (restaurant.photos && restaurant.photos.length > 0) {
          restaurant.photos.forEach((photo) => {
            const photoItem = document.createElement("div");
            photoItem.className = "flex items-center space-x-2";
            photoItem.innerHTML = `
                        <input type="text" name="photo" value="${photo}" placeholder="URL de l'image" class="admin-input flex-1 border border-gray-300 rounded-md px-3 py-2">
                        <button type="button" class="text-red-500 hover:text-red-700" onclick="removePhoto(this)">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;

            editPhotosContainer.appendChild(photoItem);
          });
        } else {
          addPhotoField("edit-photos-container");
        }

        // Show the form
        editRestaurantForm.classList.remove("hidden");
      }

      // Show edit restaurant form
      function showEditRestaurantForm(restaurantId) {
        // Switch to edit restaurant tab
        document
          .querySelector('.tab-button[data-tab="editRestaurant"]')
          .click();

        // Select the restaurant in the dropdown
        document.getElementById("restaurantToEdit").value = restaurantId;

        // Load the restaurant data
        loadRestaurantToEditForm(restaurantId);
      }

      // Update a restaurant
      function updateRestaurant() {
        const restaurantId = parseInt(document.getElementById("edit-id").value);
        const restaurantIndex = restaurants.findIndex(
          (r) => r.id === restaurantId
        );

        if (restaurantIndex === -1) return;

        // Get form values
        const name = document.getElementById("edit-name").value;
        const chef = document.getElementById("edit-chef").value;
        const cuisine = document.getElementById("edit-cuisine").value;
        const rating = parseInt(document.getElementById("edit-rating").value);
        const city = document.getElementById("edit-city").value;
        const address = document.getElementById("edit-address").value;
        const phone = document.getElementById("edit-phone").value;
        const website = document.getElementById("edit-website").value;
        const priceRange = document.getElementById("edit-priceRange").value;
        const lat =
          parseFloat(document.getElementById("edit-lat").value) || null;
        const lng =
          parseFloat(document.getElementById("edit-lng").value) || null;
        const description = document.getElementById("edit-description").value;
        const bill = document.getElementById("edit-bill").value;

        // Get menus
        const menuItems = document.querySelectorAll(
          "#edit-menus-container .menu-item"
        );
        const menus = [];

        menuItems.forEach((item) => {
          const menuName = item.querySelector('[name="menuName"]').value;
          const menuPrice = item.querySelector('[name="menuPrice"]').value;
          const menuDescription = item.querySelector(
            '[name="menuDescription"]'
          ).value;

          if (menuName || menuPrice || menuDescription) {
            menus.push({
              name: menuName,
              price: menuPrice,
              description: menuDescription,
            });
          }
        });

        // Get photos
        const photoInputs = document.querySelectorAll(
          '#edit-photos-container [name="photo"]'
        );
        const photos = [];

        photoInputs.forEach((input) => {
          if (input.value) {
            photos.push(input.value);
          }
        });

        // Update restaurant object
        restaurants[restaurantIndex] = {
          ...restaurants[restaurantIndex],
          name,
          chef,
          cuisine,
          rating,
          city,
          address,
          phone,
          website,
          priceRange,
          lat,
          lng,
          description,
          bill,
          menus,
          photos,
        };

        // Save to localStorage
        saveRestaurants();

        // Refresh the UI
        renderRestaurants();
        populateFilters();

        // Show success message
        alert("Restaurant modifié avec succès !");

        // Switch to restaurants list tab
        document
          .querySelector('.tab-button[data-tab="restaurantsList"]')
          .click();
      }

      // Delete a restaurant
      function deleteRestaurant(restaurantId) {
        restaurants = restaurants.filter((r) => r.id !== restaurantId);

        // Save to localStorage
        saveRestaurants();

        // Refresh the UI
        renderRestaurants();
        populateFilters();

        // Show success message
        alert("Restaurant supprimé avec succès !");
      }

      // Make functions available globally
      window.removeMenu = removeMenu;
      window.removePhoto = removePhoto;
      window.showPage = showPage;
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'96887c7d62dc7226',t:'MTc1NDA4NDM0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
